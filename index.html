<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Magic Cauldron</title>
    <link href="https://fonts.googleapis.com/css2?family=Eater&display=swap" rel="stylesheet">
    <style>
        body, html {
            height: 100%;
            margin: 0;
            font-family: 'Eater', cursive;
            color: rgb(117, 9, 194);
            overflow: hidden;
        }
        .container {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        .background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #000; /* Fallback color */
            background-image: 
                linear-gradient(to right, rgba(0,0,0,1) 0%, rgba(0,0,0,0.8) 10%, rgba(0,0,0,0) 30%, rgba(0,0,0,0) 70%, rgba(0,0,0,0.8) 90%, rgba(0,0,0,1) 100%),
                linear-gradient(to bottom, rgba(0,0,0,1) 0%, rgba(0,0,0,0.8) 10%, rgba(0,0,0,0) 30%, rgba(0,0,0,0) 70%, rgba(0,0,0,0.8) 90%, rgba(0,0,0,1) 100%),
                url('Pumpkins.png');
            background-size: cover, cover, cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
            z-index: 1;
        }
        #bgVideo {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: none;
            z-index: 2;
        }
        .content {
            position: relative;
            z-index: 3;
            text-align: center;
            transform-origin: center center;
            transition: transform 0.3s ease;
        }
        h1, h2, #submitButton, #returnButton {
            text-shadow: 
                -1px -1px 0 lime,
                1px -1px 0 lime,
                -1px 1px 0 lime,
                1px 1px 0 lime;
        }
        h1 {
            font-size: 3em;
        }
        h2 {
            font-size: 2em;
        }
        #cauldronImage {
            width: 400px;
            height: auto;
            margin: 20px 0;
            filter: drop-shadow(0 0 2px lime);
        }
        #questionForm {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 20px;
        }
        #questionInput {
            width: 300px;
            padding: 10px;
            margin-bottom: 10px;
            border: none;
            border-radius: 5px;
            font-family: 'Eater', cursive;
            background-color: rgba(255, 255, 255, 0.8);
            color: purple;
            text-align: center; /* Center the text input */
        }
        #questionInput::placeholder {
            text-align: center; /* Center the placeholder text */
        }
        #submitButton, #returnButton {
            padding: 10px 20px;
            background-color: #1ecc0f;
            color: purple;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Eater', cursive;
            font-size: 1em;
        }
        @keyframes rumbleAndScale {
            0% { transform: translate(1px, 1px) rotate(0deg) scale(1); }
            10% { transform: translate(-1px, -2px) rotate(-1deg) scale(1.05); }
            20% { transform: translate(-3px, 0px) rotate(1deg) scale(1.1); }
            30% { transform: translate(3px, 2px) rotate(0deg) scale(1.15); }
            40% { transform: translate(1px, -1px) rotate(1deg) scale(1.2); }
            50% { transform: translate(-1px, 2px) rotate(-1deg) scale(1.15); }
            60% { transform: translate(-3px, 1px) rotate(0deg) scale(1.1); }
            70% { transform: translate(3px, 1px) rotate(-1deg) scale(1.05); }
            80% { transform: translate(-1px, -1px) rotate(1deg) scale(1); }
            90% { transform: translate(1px, 2px) rotate(0deg) scale(0.95); }
            100% { transform: translate(1px, -2px) rotate(-1deg) scale(1); }
        }
        .rumbling {
            animation: rumbleAndScale 1.5s ease-in-out infinite;
        }
        .page {
            display: none;
        }
        .active {
            display: block;
        }
        #responseText {
            font-size: 2em;
            margin: 20px 0;
            color: lime;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="background"></div>
        <video id="bgVideo" muted loop playsinline>
            <source src="Pumpkins Bats Animation.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        <div id="questionPage" class="content page active">
            <h1>Jordan's Magic Cauldron</h1>
            <img id="cauldronImage" src="Magic Cauldron.png" alt="Magic Cauldron Image">
            <h2>Seek your reply, the Magic Cauldron can't deny!</h2>
            <form id="questionForm">
                <input type="text" id="questionInput" placeholder="Ingredients go here" required>
                <button type="submit" id="submitButton">Cook up an answer!</button>
            </form>
        </div>
        <div id="responsePage" class="content page">
            <h1>Jordan's Magic Cauldron</h1>
            <img id="cauldronImage" src="Magic Cauldron.png" alt="Magic Cauldron Image">
            <div id="responseText"></div>
            <button id="returnButton">Ask Another Question</button>
        </div>
    </div>

    <audio id="cauldronSound" loop>
        <source src="cauldron-bubbling.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var cauldronImage = document.getElementById('cauldronImage');
            var cauldronSound = document.getElementById('cauldronSound');
            var questionForm = document.getElementById('questionForm');
            var bgVideo = document.getElementById('bgVideo');
            var submitButton = document.getElementById('submitButton');
            var questionPage = document.getElementById('questionPage');
            var responsePage = document.getElementById('responsePage');
            var responseText = document.getElementById('responseText');
            var returnButton = document.getElementById('returnButton');

            // Magic 8 Ball responses
            var responses = [
                "It is certain.",
                "It is decidedly so.",
                "Without a doubt.",
                "Yes - definitely.",
                "You may rely on it.",
                "As I see it, yes.",
                "Most likely.",
                "Outlook good.",
                "Yes.",
                "Signs point to yes.",
                "Reply hazy, try again.",
                "Ask again later.",
                "Better not tell you now.",
                "Cannot predict now.",
                "Concentrate and ask again.",
                "Don't count on it.",
                "My reply is no.",
                "My sources say no.",
                "Outlook not so good.",
                "Very doubtful."
            ];

            function getRandomResponse() {
                return responses[Math.floor(Math.random() * responses.length)];
            }

            function scaleContent() {
                var pages = document.querySelectorAll('.page');
                var container = document.querySelector('.container');
                pages.forEach(function(page) {
                    var scaleX = container.clientWidth / page.offsetWidth;
                    var scaleY = container.clientHeight / page.offsetHeight;
                    var scale = Math.min(scaleX, scaleY);
                    page.style.transform = 'scale(' + scale + ')';
                });
            }

            function switchPage(fromPage, toPage) {
                fromPage.classList.remove('active');
                toPage.classList.add('active');
                scaleContent();
            }

            // Call scaleContent on load and resize
            window.addEventListener('load', scaleContent);
            window.addEventListener('resize', scaleContent);

            bgVideo.addEventListener('loadedmetadata', function() {
                var videoDuration = bgVideo.duration * 1000; // Convert to milliseconds

                questionForm.addEventListener('submit', function(e) {
                    e.preventDefault(); // Prevent form submission
                    
                    cauldronImage.classList.add('rumbling');
                    submitButton.disabled = true; // Disable the button during animation
                    
                    // Show and play the video
                    bgVideo.style.display = 'block';
                    bgVideo.currentTime = 0; // Reset video to start
                    bgVideo.play().catch(function(error) {
                        console.log("Video play failed:", error);
                    });
                    
                    // Start playing the looping cauldron sound
                    cauldronSound.currentTime = 0; // Reset the audio to the beginning
                    cauldronSound.play().catch(function(error) {
                        console.log("Audio play failed:", error);
                    });
                    
                    // Stop animation, hide video, and stop sound after video duration
                    setTimeout(function() {
                        cauldronImage.classList.remove('rumbling');
                        bgVideo.style.display = 'none';
                        bgVideo.pause();
                        cauldronSound.pause(); // Stop the looping sound
                        submitButton.disabled = false; // Re-enable the button
                        responseText.textContent = getRandomResponse(); // Set response text
                        switchPage(questionPage, responsePage);
                    }, videoDuration);
                });
            });

            returnButton.addEventListener('click', function() {
                switchPage(responsePage, questionPage);
            });
        });
    </script>
</body>
</html>